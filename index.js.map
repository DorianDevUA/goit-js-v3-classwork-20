{"version":3,"file":"index.js","sources":["../src/templates/articles.hbs","../src/js/apiService.js","../src/js/components/loadMoreButton.js","../src/js/index.js"],"sourcesContent":["{{#each this}}\n  <li>\n    <a href='{{url}}' target='_blank' rel='noopener noreferrer'>\n      <article>\n        <img src='{{urlToImage}}' alt='' width='480' />\n        <h2>{{title}}</h2>\n        <p>Posted by: {{author}}</p>\n        <p>{{description}}</p>\n      </article>\n    </a>\n  </li>\n{{/each}}\n","const API_KEY = '4330ebfabc654a6992c2aa792f3173a3';\nconst BASE_URL = 'https://newsapi.org/v2';\nconst options = {\n  headers: {\n    Authorization: API_KEY,\n  },\n};\n\nexport default class NewsApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  fetchArticles() {\n    const url = `${BASE_URL}/everything?q=${this.searchQuery}&language=en&pageSize=5&page=${this.page}`;\n\n    return fetch(url, options)\n      .then(response => response.json())\n      .then(({ articles }) => {\n        this.incrementPage();\n        return articles;\n      });\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n","export default class LoadMoreBtn {\n  constructor({ selector, hidden = false }) {\n    this.refs = this.getRefs(selector);\n\n    hidden && this.hide();\n  }\n\n  getRefs(selector) {\n    const refs = {};\n    refs.button = document.querySelector(selector);\n    refs.label = refs.button.querySelector('.label');\n    refs.spinner = refs.button.querySelector('.spinner');\n\n    return refs;\n  }\n\n  enable() {\n    this.refs.button.disabled = false;\n    this.refs.label.textContent = 'Показать ещё';\n    this.refs.spinner.classList.add('is-hidden');\n  }\n\n  disable() {\n    this.refs.button.disabled = true;\n    this.refs.label.textContent = 'Загружаем...';\n    this.refs.spinner.classList.remove('is-hidden');\n  }\n\n  show() {\n    this.refs.button.classList.remove('is-hidden');\n  }\n\n  hide() {\n    this.refs.button.classList.add('is-hidden');\n  }\n}\n","import '../css/style.css';\n\nconsole.log('Hello world');\n\n/*\n * - Пагинация\n *   - страница и кол-во на странице\n * - Загружаем статьи при сабмите формы\n * - Загружаем статьи при нажатии на кнопку «Загрузить еще»\n * - Обновляем страницу в параметрах запроса\n * - Рисуем статьи\n * - Сброс значения при поиске по новому критерию\n *\n * https://newsapi.org/\n * 4330ebfabc654a6992c2aa792f3173a3\n * http://newsapi.org/v2/everything?q=cat&language=en&pageSize=5&page=1\n */\n\nimport articlesTpl from '../templates/articles.hbs';\nimport NewsApiService from './apiService';\nimport LoadMoreBtn from './components/loadMoreButton';\n\nconst refs = {\n  searchForm: document.querySelector('.js-search-form'),\n  articlesContainer: document.querySelector('.js-articles-container'),\n};\nconst loadMoreBtn = new LoadMoreBtn({\n  selector: '[data-action=\"load-more\"]',\n  hidden: true,\n});\nconst newsApiService = new NewsApiService();\n\nrefs.searchForm.addEventListener('submit', onSearch);\nloadMoreBtn.refs.button.addEventListener('click', fetchArticles);\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  newsApiService.query = e.currentTarget.elements.query.value;\n\n  if (newsApiService.query === '') {\n    return alert('Введи что-то нормальное');\n  }\n\n  loadMoreBtn.show();\n  newsApiService.resetPage();\n  clearArticlesContainer();\n  fetchArticles();\n}\n\nfunction fetchArticles() {\n  loadMoreBtn.disable();\n  newsApiService.fetchArticles().then(articles => {\n    appendArticlesMarkup(articles);\n    loadMoreBtn.enable();\n  });\n}\n\nfunction appendArticlesMarkup(articles) {\n  refs.articlesContainer.insertAdjacentHTML('beforeend', articlesTpl(articles));\n}\n\nfunction clearArticlesContainer() {\n  refs.articlesContainer.innerHTML = '';\n}\n"],"names":["articlesTpl","Handlebars","container","depth0","helpers","partials","data","helper","alias1","alias2","alias3","alias4","lookupProperty","parent","propertyName","stack1","API_KEY","BASE_URL","options","NewsApiService","url","response","articles","newQuery","LoadMoreBtn","selector","hidden","refs","loadMoreBtn","newsApiService","onSearch","fetchArticles","e","clearArticlesContainer","appendArticlesMarkup"],"mappings":"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"}